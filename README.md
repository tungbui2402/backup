# Các giải pháp backup
## 1. Backup là gì?
Backup dữ liệu hay còn được gọi với thuật ngữ chuyên môn là backup database. Đây là hình thức copy lại toàn bộ dữ liệu trong máy tính, máy chủ hay server…phòng trường hợp thiết bị bị mất dữ liệu trong khi hoạt động do hư hỏng, sập nguồn…Từ đó có thể dễ dàng phục hồi lại dữ liệu của mình và tránh việc dữ liệu bị mất vĩnh viễn.

## 2. Tầm quan trọng của việc Backup dữ liệu 
Backup dữ liệu là vô cùng cần thiết đối với cả cá nhân lẫn tổ chức. Cho dù bạn đang sử dụng máy bàn hay laptop và hơn thế nữa là cả một hệ thống máy chủ server cho một công ty. Thì việc bảo vệ và bảo mật thông tin dữ liệu luôn là nhiệm vụ được ưu tiên hàng đầu.

Vì trong quá trình sử dụng, bạn sẽ không thể tránh khỏi những rủi ro không thể lường trước được. Từ những hành động đơn giản như xóa nhầm  hay format nhầm làm mất dữ liệu, đến những việc bất ngờ hơn như thiên tai, bão lũ,...

Bên cạnh đó, nếu backup dữ liệu thì khi muốn xem lại một tập tin đã cũ có liên quan đến công việc hiện tại thì bạn vẫn có thể sử dụng bản sao lưu, sao chép ra và sử dụng lại. Việc này sẽ giữ lại cho bạn nhiều thông tin mà bạn không muốn mất đi khi dữ liệu ngày càng nhiều mà không thể quản lý hết được.

## 3. Các giải pháp backup
### 3.1. Simpana(Comvault)
Simpana Software Platform là một giải pháp quản lý dữ liệu và thông tin tích hợp cấp doanh nghiệp được xây dựng từ đầu trên một nền tảng duy nhất và cơ sở mã thống nhất. Tất cả các tính năng chia sẻ cùng một công nghệ back-end để cung cấp những lợi ích và lợi ích vô song từ một cách tiếp cận thực sự toàn diện để bảo vệ, quản lý và truy cập dữ liệu. Nền tảng phần mềm Simpana chứa các mô-đun để bảo vệ và lưu trữ, phân tích, sao chép và tìm kiếm dữ liệu, chia sẻ một tập hợp các dịch vụ back-end chung và các tính năng nâng cao có thể tương tác liền mạch. Nền tảng phần mềm Simpana giải quyết tất cả các khía cạnh của quản lý dữ liệu doanh nghiệp trong khi cung cấp khả năng mở rộng không giới hạn và kiểm soát dữ liệu và thông tin chưa từng có.

Dữ liệu sản xuất được bảo vệ bằng cách cài đặt phần mềm proxy trên máy chủ vật lý hoặc ảo sử dụng hệ điều hành hoặc API gốc của ứng dụng để bảo vệ đúng dữ liệu ở trạng thái nhất quán. Dữ liệu sản xuất được xử lý bởi phần mềm proxy trên máy khách và được sao lưu vào đĩa, băng từ hoặc lưu trữ đám mây thông qua trình quản lý dữ liệu MediaAgent. Tất cả các hoạt động quản lý dữ liệu trong môi trường được theo dõi bởi một máy chủ tập trung, CommServe, mà quản trị viên có thể quản lý thông qua một giao diện người dùng trung tâm. Người dùng cuối có thể truy cập dữ liệu được bảo vệ bằng trình duyệt web hoặc thiết bị di động.

Các tính năng chính của Simpana Software Platform:
- Giải pháp bảo vệ dữ liệu hoàn chỉnh hỗ trợ tất cả các hệ điều hành, ứng dụng và cơ sở dữ liệu chính trên máy chủ ảo và vật lý, chia sẻ NAS, cơ sở hạ tầng dựa trên đám mây và thiết bị di động.

- Quản lý đơn giản hóa thông qua một bảng điều khiển duy nhất; xem, quản lý và truy cập tất cả các chức năng cũng như tất cả dữ liệu và thông tin trên toàn doanh nghiệp.

- Nhiều phương pháp bảo vệ bao gồm sao lưu và lưu trữ, quản lý ảnh chụp nhanh, sao chép và lập chỉ mục nội dung cho eDiscovery.

- Quản lý lưu trữ hiệu quả với Disk&Tape Duplicate Data Removal.

- Được tích hợp với các mảng lưu trữ hàng đầu trong ngành để tự động hóa việc tạo các bản sao chụp nhanh phần cứng được lập chỉ mục, nhận biết ứng dụng trên các môi trường lưu trữ của nhiều nhà cung cấp.

- Quản lý cơ sở hạ tầng ảo hoàn chỉnh hỗ trợ cả VMware và Hyper-V. Khả năng bảo mật nâng cao để hạn chế quyền truy cập vào dữ liệu quan trọng, cung cấp khả năng quản lý chi tiết và cung cấp quyền truy cập đăng nhập một lần cho người dùng Active Directory.

- Quản lý dữ liệu dựa trên chính sách, vượt qua các giới hạn của các sản phẩm sao lưu cũ bằng cách quản lý dữ liệu dựa trên nhu cầu kinh doanh chứ không phải vị trí thực tế.

- Trải nghiệm người dùng cuối tiên tiến cho phép họ bảo vệ, tìm và khôi phục dữ liệu của riêng mình bằng các công cụ phổ biến như trình duyệt web, Microsoft Outlook và File Explorer.

### 3.2. Networker
NetWorker là một giải pháp phần mềm sao lưu và khôi phục dữ liệu được thiết kế để quản lý việc sao lưu và bảo vệ dữ liệu trong môi trường doanh nghiệp. Công cụ này giúp tổ chức tổ chức và bảo vệ dữ liệu từ nhiều nguồn khác nhau, bao gồm máy chủ, máy tính cá nhân, cơ sở dữ liệu, và các hệ thống lưu trữ khác nhau.

NetWorker cung cấp khả năng tự động hóa quá trình sao lưu, lên lịch sao lưu, và khôi phục dữ liệu khi cần thiết. Nó cũng hỗ trợ tích hợp với nhiều hệ thống và ứng dụng khác nhau để đảm bảo rằng mọi loại dữ liệu quan trọng đều được bảo vệ và có thể khôi phục một cách hiệu quả.

Các tính năng chính của networker:
- Quản lý Tài nguyên: Tích hợp và quản lý nhiều nguồn dữ liệu khác nhau, bao gồm máy chủ, máy tính cá nhân, cơ sở dữ liệu, và các hệ thống lưu trữ khác.

- Sao lưu Tự động: Cung cấp khả năng tự động hóa quá trình sao lưu, giảm thiểu sự can thiệp của người quản trị và giảm thiểu nguy cơ quên sao lưu.

- Lên lịch Sao lưu: Hỗ trợ lên lịch sao lưu để có thể thực hiện sao lưu theo các kịch bản và chu kỳ cụ thể.

- Khôi phục Dữ liệu: Cung cấp khả năng khôi phục dữ liệu nhanh chóng và hiệu quả, bao gồm khả năng khôi phục từ các điểm thời gian cụ thể.

- Tích hợp Ứng dụng: Tích hợp với nhiều ứng dụng và hệ thống khác nhau, bao gồm cả cơ sở dữ liệu như Oracle, Microsoft SQL Server, và các ứng dụng doanh nghiệp khác.

- Bảo mật Dữ liệu: Cung cấp các tính năng bảo mật để bảo vệ dữ liệu trong quá trình truyền tải và lưu trữ, bao gồm mã hóa và quản lý quyền truy cập.

- Tích hợp với Cloud: Hỗ trợ tích hợp với các dịch vụ đám mây để sao lưu và khôi phục dữ liệu trên nền tảng đám mây.

- Giám sát và Báo cáo: Cung cấp các công cụ giám sát và báo cáo để theo dõi hiệu suất và tình trạng của quá trình sao lưu.

- Phục hồi Tự động: Hỗ trợ các tính năng phục hồi tự động để giảm thời gian hồi phục sau sự cố.

- Quản lý Dữ liệu Dựa trên Chính sách: Cho phép quản lý dữ liệu dựa trên chính sách để tự động xác định cách xử lý và bảo vệ dữ liệu dựa trên yêu cầu và quy định của doanh nghiệp.

### 3.2. Netbackup
NetBackup là một sản phẩm phần mềm sao lưu và khôi phục dữ liệu của công ty Veritas Technologies. Nó được thiết kế để cung cấp các giải pháp quản lý dữ liệu toàn diện cho doanh nghiệp, giúp bảo vệ và phục hồi dữ liệu một cách an toàn và hiệu quả.

NetBackup là một giải pháp đáng tin cậy và phổ biến trong lĩnh vực quản lý dữ liệu và bảo vệ dữ liệu doanh nghiệp.

- Các tính năng chính của NetBackup:

- Quản lý Tài nguyên: Tích hợp và quản lý nhiều nguồn dữ liệu khác nhau, bao gồm máy chủ, máy tính cá nhân, cơ sở dữ liệu, và các hệ thống lưu trữ khác.

- Sao lưu Tự động và Lên lịch Sao lưu: Hỗ trợ sao lưu tự động và lên lịch sao lưu để đảm bảo việc sao lưu được thực hiện đúng cách và theo kịch bản được thiết lập.

- Khôi phục Dữ liệu: Cung cấp các tính năng khôi phục linh hoạt, bao gồm khả năng khôi phục từ các điểm thời gian cụ thể.

- Tích hợp Ứng dụng:Tích hợp với nhiều ứng dụng và hệ thống khác nhau, bao gồm cơ sở dữ liệu như Oracle, Microsoft SQL Server, và các ứng dụng doanh nghiệp khác.

- Bảo mật Dữ liệu: Cung cấp các tính năng bảo mật để bảo vệ dữ liệu trong quá trình truyền tải và lưu trữ, bao gồm mã hóa và quản lý quyền truy cập.

- Tích hợp với Cloud: Hỗ trợ tích hợp với các dịch vụ đám mây để sao lưu và khôi phục dữ liệu trên nền tảng đám mây.

- Giám sát và Báo cáo: Cung cấp các công cụ giám sát và báo cáo để theo dõi hiệu suất và tình trạng của quá trình sao lưu.

- Phục hồi Tự động: Hỗ trợ các tính năng phục hồi tự động để giảm thời gian hồi phục sau sự cố.

## 4. Các loại backup
### 4.1. Full backup
Full backup là một loại sao lưu dữ liệu hoàn chỉnh, trong đó toàn bộ dữ liệu được chọn để sao lưu được copy vào một bản sao lưu mới hoặc thiết bị lưu trữ. Điều này bao gồm tất cả các tệp và thư mục trong hệ thống hoặc phạm vi sao lưu được xác định.

Ưu điểm của full backup bao gồm:

- Khôi phục đơn giản: Việc khôi phục dữ liệu từ một bản sao lưu full là đơn giản nhất vì nó bao gồm toàn bộ dữ liệu đã được sao lưu.

- Độc lập: Mỗi bản sao lưu full đều độc lập và không phụ thuộc vào các bản sao lưu trước đó. Điều này có nghĩa là nếu một bản sao lưu bị hỏng, các bản sao lưu khác vẫn có thể được sử dụng để khôi phục dữ liệu.

Tuy nhiên, có nhược điểm của full backup:

- Tốn nhiều tài nguyên: Full backup thường tốn nhiều thời gian và tài nguyên hơn so với các loại sao lưu khác, vì nó phải sao lưu toàn bộ dữ liệu.

- Tăng dung lượng lưu trữ: Do phải lưu trữ toàn bộ dữ liệu, dung lượng lưu trữ yêu cầu cho các bản sao lưu full có thể lớn.

Demo:
- Đăng nhập vào MySQL:
```
mysql -u your_username -p
```
- Chọn Cơ sở Dữ Liệu:
```
SHOW databases;
USE your_database;
```
Thực Hiện Backup:
```
mysqldump -u your_username -p your_database > backup.sql
```
Kiểm Tra Backup:
```
cat backup.sql
```
![image](https://github.com/tungbui2402/backup/assets/129025623/96b829b7-4931-46d6-96ce-8e2a025b8fac)
![image](https://github.com/tungbui2402/backup/assets/129025623/2a20d494-4382-49d6-b1c9-db01615c6008)

### 4.2. Incre backup
Incremental backup là một loại sao lưu chỉ sao lưu các dữ liệu mới hoặc đã thay đổi kể từ thời điểm sao lưu cuối cùng. Điều này giúp giảm thời gian và tài nguyên cần thiết so với việc thực hiện một full backup mỗi lần.

Ưu điểm của Incremental Backup:

- Tiết Kiệm Dung Lượng Lưu Trữ: Incremental backup chỉ sao lưu các thay đổi, giảm dung lượng lưu trữ so với full backup.

- Tốn Ít Thời Gian và Tài Nguyên Hơn: Việc thực hiện incremental backup thường tốn ít thời gian và tài nguyên hơn so với full backup, đặc biệt khi dữ liệu lớn và có ít sự thay đổi.

- Giảm Tải Cho Hệ Thống: Do chỉ sao lưu các thay đổi, nó giảm tải cho hệ thống và mạng so với việc thực hiện full backup định kỳ.

Nhược Điểm của Incremental Backup:

- Khôi Phục Phức Tạp Hơn: Quá trình khôi phục từ incremental backup có thể phức tạp hơn, đặc biệt nếu có nhiều tập tin sao lưu liên quan.

- Rủi Ro Nếu Mất Các Tập Tin Backup Trung Gian: Nếu mất bất kỳ tập tin sao lưu trung gian nào, quá trình khôi phục có thể trở nên không khả thi hoặc phức tạp.

- Yêu Cầu Quản Lý Cẩn Thận: Incremental backup đòi hỏi quản lý cẩn thận để đảm bảo rằng tất cả các tập tin sao lưu liên quan đều tồn tại và có thể được truy cập.

- Tăng Độ Phức Tạp Của Hệ Thống Backup:Trong khi giảm tải cho hệ thống, quản lý các loại backup khác nhau (full, incremental, differential) có thể tăng độ phức tạp của quá trình backup và khôi phục.

Demo:
- Kích hoạt ghi nhật ký nhị phân:
```
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
```
```
Thêm/chỉnh sửa:
log_bin = /var/log/mysql/mysql-bin.log
expire_logs_days = 10
```
- Lưu và đóng tệp, sau đó khởi động lại dịch vụ MySQL để áp dụng các thay đổi:
```
sudo systemctl restart mysql
```
- Backup tất cả database:
```
mysqldump -uroot -p --all-databases --single-transaction --flush-logs --source-data=2 > full_backup.sql
```
- Kiểm tra log:
```
sudo ls -l /var/log/mysql/
```
- Làm mới log:
```
mysqladmin -uroot -p flush-logs
```
Nó sẽ đóng mysql-bin cũ và tạo mới mysql-bin mới

- Tạo 1 database mới để thử:
```
mysql -uroot -p
mysql> create database mydb;
mysql> exit
```
- Backup database vừa tạo vào full backup:
```
mysql -uroot -p mydb < full_backup.sql
```
- Chạy lệnh sau để khôi phục bản sao lưu gia tăng:
```
sudo mysqlbinlog /var/log/mysql/mysql-bin.(file cũ) | mysql -uroot -p
```
- 
